# SISTEMA SIGEPOLI (ISPTEC)

## CONTEXTO E OBJETIVO
**Sistema de Gest√£o Escolar Polit√©cnica (SIGEPOLI)** - Banco de dados relacional que integra gest√£o acad√©mica, administrativa e operacional para o Instituto Superior Polit√©cnico de Tecnologias e Ci√™ncias (ISPTEC).

### 1. Objetivo Geral
Desenhar, modelar e implementar um banco de dados relacional que integre a gest√£o acad√©mica (cursos, turmas, matr√≠culas e avalia√ß√µes), a gest√£o de pessoas (professores, coordenadores, administrativos) e a gest√£o operacional (contratos com empresas de servi√ßos de limpeza, seguran√ßa e cafetaria), garantindo rastreabilidade, controlo de custos e relat√≥rios de desempenho.

---

### 2. Contexto do Problema
O Instituto Superior Polit√©cnico de Tecnologias e Ci√™ncias, assim como v√°rios outros institutos, opera com v√°rias √°reas interligadas:

1. **Acad√©mica** ‚Äì oferecimento de cursos, cria√ß√£o de turmas, matr√≠cula de alunos, atribui√ß√£o de professores e avalia√ß√£o de desempenho discente.
2. **Administrativa** ‚Äì pessoal administrativo distribu√≠do por departamentos (Secretaria Acad√©mica, Tesouraria, Recursos Humanos, Biblioteca, Laborat√≥rios, etc.).
3. **Coordena√ß√£o Pedag√≥gica** ‚Äì coordenadores de curso respons√°veis por curr√≠culos, grade hor√°ria e indicadores de qualidade.
4. **Operacional** ‚Äì contrata√ß√£o e fiscaliza√ß√£o de empresas terceirizadas (limpeza, seguran√ßa, cafetaria) com metas de SLA (Service Level Agreement) e pagamentos mensais.

O sistema atual apresenta dados dispersos, gerando redund√¢ncia, falhas e dificuldade de apura√ß√£o de custos.

---

### 3. Requisitos Funcionais
- **RF01** ‚Äì Cadastrar departamentos, incluindo or√ßamento anual e chefe respons√°vel.
- **RF02** ‚Äì Registrar colaboradores administrativos, vinculando-os a um departamento.
- **RF03** ‚Äì Cadastrar professores e respectiva titula√ß√£o.
- **RF04** ‚Äì Designar coordenadores por curso.
- **RF05** ‚Äì Gerir cursos, disciplinas, turmas e hor√°rios.
- **RF06** ‚Äì Processar matr√≠culas de alunos nas turmas.
- **RF07** ‚Äì Lan√ßar avalia√ß√µes e obter m√©dias.
- **RF08** ‚Äì Cadastrar empresas terceirizadas, contratos e SLA.
- **RF09** ‚Äì Registar pagamentos mensais √†s empresas com controle de SLA.
- **RF10** ‚Äì Gerar relat√≥rios de carga hor√°ria, salas e custos.
- **RF11** ‚Äì Manter auditoria de altera√ß√µes sens√≠veis.

---

### 4. Regras de Neg√≥cio Obrigat√≥rias
- **RN01** ‚Äì Um professor n√£o pode ter aulas em turmas com hor√°rios sobrepostos.
- **RN02** ‚Äì S√≥ √© permitida matr√≠cula se houver vaga e propina paga.
- **RN03** ‚Äì Notas devem estar entre 0‚Äì20.
- **RN04** ‚Äì Empresas precisam apresentar garantia v√°lida antes do pagamento.
- **RN05** ‚Äì SLA inferior a 90% gera multa autom√°tica.
- **RN06** ‚Äì Coordenador deve aprovar carga hor√°ria dos professores do curso.

---

#### **Entreg√°veis e Pontua√ß√£o**
- **Modelo Conceitual (ER)**: 5 pontos - ‚â•10 entidades, rela√ß√µes N:M resolvidas
- **Modelo L√≥gico (DER)**: 3 pontos - Tipos adequados, PKs/FKs, 3FN
- **Script DDL**: 2 pontos - CHECK, UNIQUE, INDEX, ON UPDATE/DELETE
- **Procedures**: 2 pontos - Matricular, alocar, processar pagamento
- **Functions**: 3 pontos - M√©dia ponderada, percentual SLA
- **Triggers**: 5 pontos - Auditoria, bloqueios autom√°ticos
- **Views**: 2 pontos - Grade hor√°ria, carga hor√°ria, custos
- **Consultas de Teste**: 1 ponto - ‚â•10 INSERTs + ‚â•15 consultas
- **Documenta√ß√£o**: 2 pontos - Guia implanta√ß√£o, diagrama f√≠sico

---

## PROGRAMABILIDADE E VISUALIZA√á√ÉO

### **Procedures (Procedimentos Armazenados)**

#### **1. EnrollStudent**
- **Descri√ß√£o**: Matricula um aluno em um curso e em uma turma espec√≠fica
- **Par√¢metros**: `p_user_id`, `p_course_id`, `p_class_schedules_id`
- **Funcionalidade**: Valida se o usu√°rio √© aluno, insere matr√≠cula no curso e na turma
- **Regra de Neg√≥cio**: RF06 - Processar matr√≠culas de alunos nas turmas

#### **2. AllocateResourceToRoom**
- **Descri√ß√£o**: Aloca um recurso a uma sala ou atualiza o status de um recurso j√° alocado
- **Par√¢metros**: `p_room_id`, `p_resource_id`, `p_status_resources`
- **Funcionalidade**: Valida exist√™ncia da sala e recurso, aloca/atualiza status
- **Regra de Neg√≥cio**: Gest√£o de recursos e salas

#### **3. ProcessPayment**
- **Descri√ß√£o**: Processa um pagamento, registrando-o na tabela principal e nas tabelas espec√≠ficas
- **Par√¢metros**: `p_amount`, `p_payment_method_id`, `p_reference_number`, `p_status`, `p_student_id`, `p_service_id`, `p_company_id`, `p_department_budgets_id`, `p_approved_by_staff`, `p_staff_id`, `p_type_of_staff_payment`
- **Funcionalidade**: Valida valor do pagamento, insere registro principal e associa ao tipo espec√≠fico
- **Regra de Neg√≥cio**: RF09 - Registar pagamentos mensais √†s empresas com controle de SLA

### **Functions (Fun√ß√µes)**

#### **1. ValidateGrade**
- **Descri√ß√£o**: Valida se uma nota est√° dentro do intervalo permitido (0 a 20)
- **Par√¢metros**: `grade DECIMAL(5, 2)`
- **Retorna**: `BOOLEAN` - TRUE se v√°lida, FALSE caso contr√°rio
- **Regra de Neg√≥cio**: RN03 - Notas devem estar entre 0‚Äì20

#### **2. CalculateWeightedAverage**
- **Descri√ß√£o**: Calcula a m√©dia ponderada das notas de um aluno numa disciplina espec√≠fica
- **Par√¢metros**: `p_student_id`, `p_class_schedules_id`
- **Retorna**: `DECIMAL(5, 2)` - M√©dia ponderada calculada
- **Regra de Neg√≥cio**: RF07 - Lan√ßar avalia√ß√µes e obter m√©dias

#### **3. CalculateSLAPercentage**
- **Descri√ß√£o**: Retorna o percentual de SLA alcan√ßado por uma empresa para um SLA espec√≠fico
- **Par√¢metros**: `p_company_id`, `p_sla_id`, `p_evaluation_period`
- **Retorna**: `DECIMAL(5, 2)` - Percentual de SLA alcan√ßado
- **Regra de Neg√≥cio**: RF08 - Gerar relat√≥rios de carga hor√°ria, salas e custos

### **Triggers (Gatilhos)**

#### **1. trg_audit_users**
- **Descri√ß√£o**: Registra INSERTs na tabela `users` na tabela `audit_logs`
- **Evento**: `AFTER INSERT ON users`
- **Funcionalidade**: Auditoria autom√°tica de novos usu√°rios
- **Regra de Neg√≥cio**: RF11 - Manter auditoria de altera√ß√µes sens√≠veis

#### **2. trg_audit_users_update**
- **Descri√ß√£o**: Registra UPDATEs na tabela `users` na tabela `audit_logs`
- **Evento**: `AFTER UPDATE ON users`
- **Funcionalidade**: Auditoria autom√°tica de altera√ß√µes de usu√°rios
- **Regra de Neg√≥cio**: RF11 - Manter auditoria de altera√ß√µes sens√≠veis

#### **3. trg_audit_users_delete**
- **Descri√ß√£o**: Registra DELETEs na tabela `users` na tabela `audit_logs`
- **Evento**: `AFTER DELETE ON users`
- **Funcionalidade**: Auditoria autom√°tica de exclus√µes de usu√°rios
- **Regra de Neg√≥cio**: RF11 - Manter auditoria de altera√ß√µes sens√≠veis

#### **4. trg_apply_sla_fine**
- **Descri√ß√£o**: Aplica multa autom√°tica se SLA inferior a 90%
- **Evento**: `AFTER INSERT ON companies_sla_evaluation`
- **Funcionalidade**: Calcula e aplica multa automaticamente quando SLA < 90%
- **Regra de Neg√≥cio**: RN05 - SLA inferior a 90% gera multa autom√°tica

#### **5. trg_approve_teacher_availability**
- **Descri√ß√£o**: Garante que aprova√ß√£o da carga hor√°ria seja feita por coordenador
- **Evento**: `BEFORE UPDATE ON teacher_availability`
- **Funcionalidade**: Valida se aprovador √© coordenador do curso do professor
- **Regra de Neg√≥cio**: RN06 - Coordenador deve aprovar carga hor√°ria dos professores do curso

### **Views (Vis√µes)**

#### **1. ClassScheduleView**
- **Descri√ß√£o**: Vis√£o consolidada da grade hor√°ria das turmas
- **Conte√∫do**: Turma, disciplina, professor, hor√°rios e sala
- **Funcionalidade**: Apresenta informa√ß√µes completas de agendamento de aulas
- **Regra de Neg√≥cio**: RF10 - Gerar relat√≥rios de carga hor√°ria, salas e custos

#### **2. TeacherWorkloadView**
- **Descri√ß√£o**: Carga hor√°ria total de cada professor por disciplina
- **Conte√∫do**: Professor, disciplina e total de horas de trabalho
- **Funcionalidade**: Controle de carga hor√°ria dos docentes
- **Regra de Neg√≥cio**: RF10 - Gerar relat√≥rios de carga hor√°ria, salas e custos

#### **3. DepartmentCostsView**
- **Descri√ß√£o**: Or√ßamentos e gastos por departamento para cada ano fiscal
- **Conte√∫do**: Departamento, ano fiscal, or√ßamento total, gasto e restante
- **Funcionalidade**: Controle de custos por departamento
- **Regra de Neg√≥cio**: RF10 - Gerar relat√≥rios de carga hor√°ria, salas e custos

#### **4. CompanyPaymentCostsView**
- **Descri√ß√£o**: Pagamentos feitos a empresas com informa√ß√µes detalhadas
- **Conte√∫do**: Empresa, valor, data, tipo de pagamento e departamento
- **Funcionalidade**: Controle de pagamentos a terceirizados
- **Regra de Neg√≥cio**: RF10 - Gerar relat√≥rios de carga hor√°ria, salas e custos

#### **5. StudentFeeCostsView**
- **Descri√ß√£o**: Custos de propinas dos alunos com informa√ß√µes completas
- **Conte√∫do**: Aluno, valor da propina, m√™s de refer√™ncia, data e status
- **Funcionalidade**: Controle de pagamentos de propinas
- **Regra de Neg√≥cio**: RF10 - Gerar relat√≥rios de carga hor√°ria, salas e custos

---

## RESUMO ESTAT√çSTICO DAS FUNCIONALIDADES

### **üìä Estat√≠sticas Gerais**
- **Total de Tabelas**: 35+ tabelas implementadas
- **Total de Procedures**: 3 procedures funcionais
- **Total de Functions**: 3 fun√ß√µes especializadas
- **Total de Triggers**: 5 triggers de auditoria e valida√ß√£o
- **Total de Views**: 5 views para relat√≥rios e consultas

### **üéØ Cobertura dos Requisitos Funcionais**
- ‚úÖ **RF01** - Cadastrar departamentos com or√ßamento
- ‚úÖ **RF02** - Registrar colaboradores administrativos
- ‚úÖ **RF03** - Cadastrar professores e titula√ß√£o
- ‚úÖ **RF04** - Designar coordenadores por curso
- ‚úÖ **RF05** - Gerir cursos, disciplinas, turmas e hor√°rios
- ‚úÖ **RF06** - Processar matr√≠culas de alunos (Procedure: EnrollStudent)
- ‚úÖ **RF07** - Lan√ßar avalia√ß√µes e obter m√©dias (Function: CalculateWeightedAverage)
- ‚úÖ **RF08** - Cadastrar empresas terceirizadas, contratos e SLA
- ‚úÖ **RF09** - Registar pagamentos mensais (Procedure: ProcessPayment)
- ‚úÖ **RF10** - Gerar relat√≥rios (5 Views implementadas)
- ‚úÖ **RF11** - Manter auditoria (3 Triggers de auditoria)

### **üîí Cobertura das Regras de Neg√≥cio**
- ‚úÖ **RN01** - Professor n√£o pode ter aulas com hor√°rios sobrepostos
- ‚úÖ **RN02** - Matr√≠cula s√≥ com vaga e propina paga
- ‚úÖ **RN03** - Notas entre 0‚Äì20 (Function: ValidateGrade)
- ‚úÖ **RN04** - Empresas precisam apresentar garantia v√°lida
- ‚úÖ **RN05** - SLA inferior a 90% gera multa autom√°tica (Trigger: trg_apply_sla_fine)
- ‚úÖ **RN06** - Coordenador aprova carga hor√°ria (Trigger: trg_approve_teacher_availability)

### **üèóÔ∏è Arquitetura do Sistema**
- **Camada de Dados**: 35+ tabelas normalizadas
- **Camada de L√≥gica**: 3 procedures + 3 functions
- **Camada de Auditoria**: 5 triggers autom√°ticos
- **Camada de Apresenta√ß√£o**: 5 views para relat√≥rios
- **Camada de Valida√ß√£o**: Constraints CHECK, UNIQUE, FOREIGN KEY
- **Camada de Performance**: √çndices otimizados

---

## IMPLEMENTACAO

> SGBD -> MySQL

### 6. ESTRUTURA 

#### **Arquivos SQL**
```
sigepoli/
‚îú‚îÄ‚îÄ sql/
‚îÇ   ‚îú‚îÄ‚îÄ 01_schema/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 01_create_database.sql
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 02_create_tables.sql
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 03_create_constraints.sql
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 04_create_indexes.sql
‚îÇ   ‚îú‚îÄ‚îÄ 02_programmability/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ procedures.sql
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ functions.sql
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ triggers.sql
‚îÇ   ‚îú‚îÄ‚îÄ 03_views/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ views.sql
‚îÇ   ‚îú‚îÄ‚îÄ 04_data/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ insert_test_data.sql
‚îÇ   ‚îî‚îÄ‚îÄ 05_tests/
‚îÇ       ‚îú‚îÄ‚îÄ test_queries.sql
‚îÇ       ‚îî‚îÄ‚îÄ validate_rules.sql
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ deploy_completo.sql
‚îÇ   ‚îú‚îÄ‚îÄ deploy_monolitico.sql
‚îÇ   ‚îî‚îÄ‚îÄ reset_database.sql
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ modelo conceitual.md
‚îú‚îÄ‚îÄ modelo logico.md
‚îú‚îÄ‚îÄ guia_implantacao.md
‚îú‚îÄ‚îÄ justificativas_indices.md
‚îî‚îÄ‚îÄ relatorio_1_pagina.pdf
```

### 1. √ÅREA ACAD√äMICA üìö

#### **Estrutura de Cursos e Disciplinas**
- [x] `courses` ‚Äî Cadastro de cursos oferecidos
- [x] `subjects` ‚Äî Cat√°logo de disciplinas
- [x] `course_subjects` ‚Äî Rela√ß√£o curso-disciplina com pr√©-requisitos
- [x] `course_availability` ‚Äî Vagas dispon√≠veis por ano letivo
- [x] `course_fees` ‚Äî Defini√ß√£o das taxas de curso

#### **Gest√£o de Turmas e Hor√°rios**
- [x] `classes` ‚Äî Turmas por curso
- [x] `time_slots` ‚Äî Per√≠odos de aula dispon√≠veis
- [x] `class_schedules` ‚Äî Hor√°rios das turmas e aloca√ß√µes (disciplina, professor, sala)
- [x] `rooms` ‚Äî Salas de aula e espa√ßos f√≠sicos
- [x] `resources` ‚Äî Recursos materiais e equipamentos
- [x] `room_resources` ‚Äî Aloca√ß√£o de recursos por sala
- [x] `room_bookings` ‚Äî Reservas especiais de salas

#### **Gest√£o de Alunos**
- [x] `students` ‚Äî Dados detalhados dos alunos
- [x] `student_enrollments` ‚Äî Matr√≠cula dos alunos em cursos
- [x] `class_enrollments` ‚Äî Matr√≠culas dos alunos em turmas espec√≠ficas
- [x] `student_fees` ‚Äî Registro das propinas e outras taxas dos alunos

#### **Gest√£o de Professores**
- [x] `teachers` ‚Äî Dados espec√≠ficos dos docentes
- [x] `teacher_specializations` ‚Äî Especializa√ß√µes e √°reas de atua√ß√£o dos professores
- [x] `teacher_availability` ‚Äî Disponibilidade e carga hor√°ria dos professores

#### **Sistema de Avalia√ß√£o**
- [x] `grades` ‚Äî Notas e resultados de avalia√ß√µes dos alunos
- [x] `assessment_types` ‚Äî Tipos de avalia√ß√£o e seus pesos
- [x] `attendance` ‚Äî Controle de presen√ßas e faltas dos alunos
- [x] `classes_attended` ‚Äî Registro de aulas ministradas

---

### 2. √ÅREA ADMINISTRATIVA üè¢

#### **Gest√£o de Pessoal**
- [x] `users` ‚Äî Dados centrais de todos os utilizadores (alunos, funcion√°rios, professores)
- [x] `user_roles` ‚Äî Defini√ß√£o dos pap√©is e permiss√µes no sistema
- [x] `user_role_assignments` ‚Äî Atribui√ß√£o de pap√©is aos utilizadores
- [x] `user_identification` ‚Äî Documentos de identifica√ß√£o dos utilizadores
- [x] `user_health` ‚Äî Informa√ß√µes de sa√∫de e necessidades especiais dos utilizadores
- [x] `departments` ‚Äî Estrutura e organiza√ß√£o dos departamentos
- [x] `department_budgets` ‚Äî Or√ßamento anual e controle de gastos por departamento
- [x] `staff` ‚Äî Funcion√°rios administrativos e t√©cnicos
- [x] `academic_qualifications` ‚Äî Qualifica√ß√µes acad√™micas de funcion√°rios e professores
- [x] `positions` ‚Äî Cargos e fun√ß√µes dispon√≠veis na institui√ß√£o
- [x] `staff_positions` ‚Äî Atribui√ß√£o de cargos aos funcion√°rios
- [x] `staff_leaves` ‚Äî Registro de f√©rias e licen√ßas dos funcion√°rios
- [x] `evaluation` ‚Äî Defini√ß√£o de avalia√ß√µes de desempenho
- [x] `staff_evaluation` ‚Äî Avalia√ß√µes espec√≠ficas de funcion√°rios
- [x] `course_evaluation` ‚Äî Avalia√ß√µes de cursos por alunos e feedback
- [x] `performance` ‚Äî Resultados consolidados das avalia√ß√µes de desempenho
- [x] `course_access` ‚Äî Registro de inscri√ß√µes e provas de acesso a cursos

#### **Coordena√ß√£o de Cursos**
- [x] `courses.coordinator_staff_id` - Coordenadores atribu√≠dos aos cursos (RF04)
  - **VALIDA√á√ÉO**: Apenas coordenadores aprovam carga hor√°ria (RN06)

#### **Secretaria Acad√©mica (cr√≠tica para ISPTEC)**
- [x] `services` ‚Äî Servi√ßos prestados pela institui√ß√£o (ex: emiss√£o de declara√ß√µes)
- [x] `service_types` ‚Äî Categorias de servi√ßos oferecidos
- [x] `service_evaluation` ‚Äî Avalia√ß√µes da qualidade dos servi√ßos

#### **Tesouraria (cr√≠tica para ISPTEC)**
- [x] `payments` ‚Äî Registros gerais de todas as transa√ß√µes financeiras
- [x] `payment_types` ‚Äî Tipos de m√©todos de pagamento
- [x] `student_payments` ‚Äî Pagamentos espec√≠ficos de alunos (propinas, servi√ßos)
- [x] `company_payments` ‚Äî Pagamentos a empresas terceirizadas
- [x] `staff_payments` ‚Äî Pagamentos a funcion√°rios (sal√°rios, b√¥nus)
- [x] `fines` ‚Äî Registro de multas aplicadas (atrasos, infra√ß√µes)

#### **Biblioteca**
- [x] `library_items` ‚Äî Cat√°logo geral de recursos da biblioteca (livros, peri√≥dicos, etc.)
- [x] `library_loans` ‚Äî Empr√©stimos e devolu√ß√µes de itens da biblioteca

---

### 3. √ÅREA OPERACIONAL ‚öôÔ∏è

#### **Gest√£o de Servi√ßos, Pagamentos e Terceirizados**
- [x] `companies` ‚Äî Empresas parceiras e terceirizadas
- [x] `companies_departments` ‚Äî Relacionamento entre empresas e departamentos
- [x] `companies_contracts` ‚Äî Contratos firmados com empresas
- [x] `companies_sla` ‚Äî Acordos de N√≠vel de Servi√ßo (SLA) com empresas
- [x] `companies_sla_evaluation` ‚Äî Avalia√ß√µes de desempenho dos SLAs

#### **Monitoramento e Pagamentos**
  - **VALIDA√á√ÉO**: Verifica garantia v√°lida antes do pagamento (RN04)
  - **VALIDA√á√ÉO**: Multa autom√°tica se SLA < 90% (RN05)

---

### 4. √ÅREAS TRANSVERSAIS üîÑ

#### **Auditoria**
- [x] `audit_logs` ‚Äî Logs detalhados de todas as opera√ß√µes sens√≠veis do sistema

#### **Relat√≥rios** (Consultas, n√£o tabelas)
- **RF10**: Relat√≥rios de carga hor√°ria, salas e custos
- **Views implementadas**:
  - [x] `vw_class_schedule` - Grade hor√°ria detalhada por turma.
  - [x] `vw_teacher_workload` - Carga hor√°ria total por professor.
  - [x] `vw_department_costs_summary` - Resumo de custos por departamento.

#### **Notifica√ß√µes**
- [x] `notifications` ‚Äî Gerenciamento e envio de notifica√ß√µes aos utilizadores

---

### 5. VALIDA√á√ïES E REGRAS DE NEG√ìCIO

#### **Procedures (RF - Matricular, Alocar, Processar)**
- [x] `EnrollStudentInClass` - Matr√≠cula de aluno com valida√ß√£o de vaga e propina (RN02)
- [x] `AllocateTeacherToClass` - Aloca√ß√£o de professor sem sobreposi√ß√£o de hor√°rios (RN01)
- [x] `ProcessStudentPayment` - Processamento de pagamento de propina

#### **Functions (C√°lculos)**
- [x] `CalculateWeightedAverage` - C√°lculo da m√©dia ponderada das notas do aluno
- [x] `CalculateSLAPercentage` - C√°lculo do percentual de SLA alcan√ßado

#### **Triggers (Valida√ß√µes Autom√°ticas e L√≥gica de Neg√≥cio)**
- [x] `Triggers de Auditoria` - Registram INSERTs, UPDATEs e DELETEs em tabelas sens√≠veis (RF11).
- [x] `trg_apply_sla_fine` - Aplica multa autom√°tica se o percentual de SLA for inferior a 90% (RN05).
- [x] `trg_approve_teacher_availability` - Garante que a aprova√ß√£o da carga hor√°ria de um professor seja feita por um coordenador de curso (RN06).
- [x] `trg_grades_before_insert/update` - Valida que as notas inseridas/atualizadas estejam entre 0-20 (RN03).
- [x] `trg_generate_semester_fees` - Gera automaticamente as taxas de propina por semestre para novas matr√≠culas de alunos.
- [x] `Triggers de Valida√ß√£o de Dados` - Implementados em diversas tabelas (`users`, `departments`, `students`, `staff`, `courses`, `subjects`, `classes`, `rooms`, `course_fees`, `student_fees`, `payments`, `payment_types`, `companies`, `companies_contracts`, `companies_sla`, `companies_sla_evaluation`, `assessment_types`, `user_roles`, `class_schedules`, `student_enrollments`) para garantir a integridade e consist√™ncia dos dados, conforme as regras de neg√≥cio.

#### **Procedures (RF - Matricular, Alocar, Processar)**

---matricular_aluno`** - Matr√≠cula com valida√ß√£o de vaga e propina (RN02)
- [ ] **`sp_alocar_professor`** - Aloca√ß√£o sem sobreposi√ß√£o de hor√°rios (RN01)
- [ ] **`sp_processar_pagamento`** - Pagamento com c√°lculo de multa (RN05)

#### **Functions (C√°lculos)**
- [ ] **`fn_calcular_media_ponderada`** - M√©dia ponderada do aluno
- [ ] **`fn_calcular_percentual_sla`** - Percentual de SLA mensal

#### **Triggers (Valida√ß√µes Autom√°ticas)**
- [ ] **`tr_validar_sobreposicao_horario`** - Previne sobreposi√ß√£o de hor√°rios (RN01)
- [ ] **`tr_validar_nota_range`** - Valida notas entre 0-20 (RN03)
- [ ] **`tr_bloquear_pagamento_sem_garantia`** - Bloqueia pagamento sem garantia (RN04)
- [ ] **`tr_auditoria_matriculas`** - Auditoria de matr√≠culas (RF11)
- [ ] **`tr_auditoria_pagamentos`** - Auditoria de pagamentos (RF11)

#### **Views (Relat√≥rios)**
- [ ] **`vw_grade_horaria_curso`** - Grade hor√°ria por curso
- [ ] **`vw_carga_horaria_professor`** - Carga hor√°ria por professor
- [ ] **`vw_custos_servicos_mes`** - Resumo de custos mensais

---

